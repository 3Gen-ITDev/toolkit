/*!
 * Titon Toolkit v1.1.0
 * Copyright 2010-2014, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(){"use strict";Toolkit.Blackout=new Class({Extends:Toolkit.Component,count:0,loader:null,message:null,options:{loader:"bar-wave",loaderMessage:Toolkit.messages.loading,waveCount:5,template:'<div class="'+Toolkit.options.vendor+'blackout" id="toolkit-blackout"></div>',templateFrom:"#toolkit-blackout"},initialize:function(a){this.parent(a),this.createElement(),this.createLoader(),this.fireEvent("init")},createLoader:function(){var a=this.options,b=Toolkit.options.vendor,c="bubble-spinner"===a.loader?8:a.waveCount;this.loader=new Element("div."+b+"loader."+a.loader).inject(this.element);var d,e="";for(d=0;c>d;d++)e+="<span></span>";"bubble-spinner"===a.loader?new Element("div.spinner").set("html",e).inject(this.loader):this.loader.set("html",e),this.message=new Element("div."+b+"loader-message").set("html",a.loaderMessage).inject(this.loader)},hide:function(){var a=this.count-1;return 0>=a?(this.count=0,this.element.conceal(),this.hideLoader()):this.count=a,this.fireEvent("hide",0>=a),this},hideLoader:function(){return this.loader.conceal(),this},show:function(){return this.count++,this.element.reveal(),this.showLoader(),this.fireEvent("show"),this},showLoader:function(){return this.loader.reveal(),this}});var a=null;Toolkit.Blackout.factory=function(b){return a?a:a=new Toolkit.Blackout(b)}}();