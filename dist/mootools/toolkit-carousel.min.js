/*!
 * Titon Toolkit v1.1.0
 * Copyright 2010-2014, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(){"use strict";Toolkit.Carousel=new Class({Extends:Toolkit.Component,Binds:["next","prev","start","stop","resize","onCycle","onJump"],stopped:!1,itemsWrapper:null,itemsList:null,items:[],tabsWrapper:null,tabs:[],prevButton:null,nextButton:null,index:0,timer:null,options:{animation:"slide",duration:5e3,autoCycle:!0,stopOnHover:!0,itemsElement:".carousel-items",itemElement:"li",tabsElement:".carousel-tabs",tabElement:"a",nextElement:".carousel-next",prevElement:".carousel-prev",template:!1},initialize:function(a,b){if(this.parent(b),this.element=a,this.options=b=this.inheritOptions(this.options,a),this.itemsWrapper=a.getElement(b.itemsElement),this.itemsWrapper&&(this.itemsList=this.itemsWrapper.getChildren("ul, ol"),this.items=this.itemsWrapper.getElements(b.itemElement)),this.tabsWrapper=a.getElement(b.tabsElement),this.tabsWrapper&&(this.tabs=this.tabsWrapper.getElements(b.tabElement)),this.nextButton=a.getElement(b.nextElement),this.prevButton=a.getElement(b.prevElement),this.items.length<=1)return this.tabsWrapper.hide(),this.nextButton.hide(),void this.prevButton.hide();switch(a.addClass(b.animation),b.animation){case"fade":this.items[0].reveal();break;case"slide":this.itemsList.setStyle("width",100*this.items.length+"%"),this.items.setStyle("width",100/this.items.length+"%")}this.tabs.forEach(function(a,b){a.set("data-index",b)}),this.events={"keydown window":"onKeydown","swipe element":"onSwipe","click tabs":"onJump","click nextButton":"next","click prevButton":"prev"},b.stopOnHover&&(this.events["mouseenter element"]="stop",this.events["mouseleave element"]="start"),this.enable(),this.fireEvent("init"),this.reset().start()},jump:function(a){switch(this.index=a=a.bound(this.items.length),this.tabs.length&&(this.tabs.removeClass(Toolkit.options.isPrefix+"active"),this.tabs[a]&&this.tabs[a].addClass(Toolkit.options.isPrefix+"active")),this.options.animation){case"fade":this.items.removeClass("show"),this.items[a].reveal();break;case"slide-up":this.itemsList.setStyle("top",-(100*a)+"%");break;default:this.itemsList.setStyle("left",-(100*a)+"%")}return this.reset(),this.fireEvent("jump",a),this},next:function(){return this.jump(this.index+1),this},prev:function(){return this.jump(this.index-1),this},reset:function(){return this.options.autoCycle&&(clearInterval(this.timer),this.timer=setInterval(this.onCycle,this.options.duration)),this},start:function(){return this.element.removeClass(Toolkit.options.isPrefix+"stopped"),this.stopped=!1,this.fireEvent("start"),this},stop:function(){return this.element.addClass(Toolkit.options.isPrefix+"stopped"),this.stopped=!0,this.fireEvent("stop"),this},onCycle:function(){this.stopped||(this.fireEvent("cycle",this.index),this.next())},onJump:function(a){a.preventDefault(),this.jump(a.target.get("data-index")||0)},onKeydown:function(a){if(["up","down","left","right"].contains(a.key))switch(a.preventDefault(),a.key){case"up":this.jump(0);break;case"down":this.jump(-1);break;case"left":this.prev();break;case"right":this.next()}},onSwipe:function(a){"left"===a.direction?this.next():"right"===a.direction&&this.prev()}}),Toolkit.createComponent("carousel",function(a){return new Toolkit.Carousel(this,a)})}();