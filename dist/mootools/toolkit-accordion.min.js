/*!
 * Titon Toolkit v1.2.0
 * Copyright 2010-2014, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(){"use strict";Toolkit.Accordion=new Class({Extends:Toolkit.Component,headers:[],sections:[],index:0,options:{mode:"click",defaultIndex:0,multiple:!1,collapsible:!1,headerElement:".accordion-header",sectionElement:".accordion-section"},initialize:function(a,b){this.parent(b),this.element=a,this.options=b=this.inheritOptions(this.options,a);var c=a.getElements(b.sectionElement),d=a.getElements(b.headerElement);this.headers=d,this.sections=c,d.each(function(a,b){a.set("data-index",b)}),c.each(function(a){a.set("data-height",a.getHeight()).conceal()}),this.events[b.mode+" headers"]="onShow",this.enable(),this.fireEvent("init"),this.jump(b.defaultIndex)},jump:function(a){return a=a.bound(this.headers.length),this.fireEvent("jump",a),this.show(this.headers[a])},show:function(a){var b=this.options,c=a.getParent(),d=a.getNext(),e=a.get("data-index"),f=d.get("data-height").toInt(),g=Toolkit.options.isPrefix;if("click"===b.mode&&(b.multiple||b.collapsible&&this.node===a))d.isShown()&&this.node?(d.setStyle("max-height",0).conceal(),c.removeClass(g+"active")):(d.setStyle("max-height",f).reveal(),c.addClass(g+"active"));else{if(this.node===a)return this;this.sections.setStyle("max-height",0).conceal(),d.setStyle("max-height",f).reveal(),this.element.getChildren("li").removeClass(g+"active"),c.addClass(g+"active")}return this.index=e,this.node=a,this.fireEvent("show",[d,a,e]),this},onShow:function(a){a.preventDefault();for(var b=a.target,c=this.headers;!c.contains(b);)b=b.getParent();b&&this.show(b)}}),Toolkit.createComponent("accordion",function(a){return new Toolkit.Accordion(this,a)})}();