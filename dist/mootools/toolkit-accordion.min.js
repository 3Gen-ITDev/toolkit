/*!
 * Titon Toolkit v1.0.4
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(){"use strict";Toolkit.Accordion=new Class({Extends:Toolkit.Component,headers:[],sections:[],previousIndex:0,currentIndex:0,options:{mode:"click",defaultIndex:0,multiple:!1,collapsible:!1,headerElement:".accordion-head",contentElement:".accordion-handle",onJump:null},initialize:function(a,b){this.parent(b),this.setElement(a),b=this.options;var c=this.element.getElements(b.contentElement),d=this.element.getElements(b.headerElement),e=d[0];this.headers=d,this.sections=c,d[b.defaultIndex]&&(e=d[b.defaultIndex]),this.element.getChildren("li").removeClass(Toolkit.options.isPrefix+"active"),d.each(function(a,b){a.set("data-index",b)}),c.each(function(a){a.set("data-height",a.getHeight()).conceal()}),this.show(e),this.bindEvents(),this.fireEvent("init")},bindEvents:function(){return this.element?(this.headers.addEvent("click"===this.options.mode?"click":"mouseover",this.__show),this):this},jump:function(a){return a>=this.headers.length?a=0:0>a&&(a=this.headers.length-1),this.fireEvent("jump",a),this.show(this.headers[a])},show:function(a){var b=this.options,c=a.getParent(),d=a.getNext(b.contentElement),e=a.get("data-index"),f=d.get("data-height").toInt();if("click"===b.mode&&(b.multiple||b.collapsible&&this.node===a))d.isShown()&&this.node?(d.setStyle("max-height",0).conceal(),c.removeClass(Toolkit.options.isPrefix+"active")):(d.setStyle("max-height",f).reveal(),c.addClass(Toolkit.options.isPrefix+"active"));else{if(this.node===a)return this;this.sections.setStyle("max-height",0).conceal(),d.setStyle("max-height",f).reveal(),this.element.getChildren("li").removeClass(Toolkit.options.isPrefix+"active"),c.addClass(Toolkit.options.isPrefix+"active")}return this.previousIndex=this.currentIndex,this.currentIndex=e,this.node=a,this.fireEvent("show",d),this},__show:function(a){if(a.preventDefault(),this.enabled){for(var b=a.target,c=this.options.headerElement.substr(1);b&&!b.hasClass(c);)b=b.getParent();b&&this.show(b)}}}),Element.implement("accordion",function(a){return this.$accordion||(this.$accordion=new Toolkit.Accordion(this,a)),this})}();