/*!
 * Titon Toolkit v1.1.0-alpha
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Drop=Toolkit.Component.create(function(b,c){this.options=this.setOptions(Toolkit.Drop.options,c),this.nodes=a(b),this.element=null,this.node=null,this.enabled=!0,this.initialize=function(){var b=["down","up","left","right"].map(function(a){return"."+Toolkit.options.vendor+"drop--"+a});a(this.nodes.selector+", "+b.join(", ")).clickout(this.hide.bind(this)),a(this.options.context||document).on("click"===this.options.mode?"click":"mouseenter",this.nodes.selector,this.__show.bind(this)),this.fireEvent("init")},this.hide=function(){return this.element&&this.element.is(":shown")&&(this.element.conceal(),this.node.removeClass(Toolkit.options.isPrefix+"active"),this.fireEvent("hide")),this},this.show=function(b){return this.element.reveal(),this.node=a(b),this.node.addClass(Toolkit.options.isPrefix+"active"),this.fireEvent("show"),this},this.__show=function(b){if(b.preventDefault(),this.enabled){var c=a(b.target),d=this.readValue(c,this.options.getTarget);d&&"#"===d.substr(0,1)&&(this.options.hideOpened&&this.node&&!this.node.is(c)&&this.hide(),this.element=a(d),this.node=c,this.element.is(":shown")?this.hide():this.show(c))}},this.initialize()}),Toolkit.Drop.options={mode:"click",context:null,getTarget:"data-drop",hideOpened:!0},a.fn.drop=function(b){var c=new Toolkit.Drop(this,b);return this.each(function(){a(this).addData("toolkit.drop",c)})}}(jQuery);