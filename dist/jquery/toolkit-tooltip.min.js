/*!
 * Titon Toolkit v1.2.0
 * Copyright 2010-2014, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Tooltip=Toolkit.Component.extend(function(b,c){var d,e;this.component="Tooltip",this.version="1.2.0",this.options=c=this.setOptions(c),this.element=d=this.createElement(),this.elementHead=d.find(c.titleElement),this.elementBody=d.find(c.contentElement),this.nodes=b=a(b),this.node=null,this.cache={},this.events=e={},this.runtime={},d.removeClass(c.className),b.each(function(b,c){a(c).attr("data-tooltip-title",a(c).attr("title")).removeAttr("title")}),"title"===c.getTitle&&(c.getTitle="data-tooltip-title"),"click"===c.mode?(e["clickout element"]="hide",e["clickout "+b.selector]="hide"):e["mouseleave "+b.selector]="hide",e[c.mode+" "+b.selector]="onShow",this.enable(),this.fireEvent("init")},{hide:function(){var a=this.element.data("new-position")||this.runtime.position||this.options.position,b=this.runtime.className||this.options.className;this.runtime={},this.element.conceal().removeClass(a).removeClass(b).removeData("new-position"),this.fireEvent("hide")},position:function(b,c){var d=a.isEmptyObject(this.runtime)?this.options:this.runtime;if(b!==!0)if(this.element.addClass(d.position).addClass(d.className),c=c||this.readValue(this.node,d.getTitle),c&&d.showTitle?this.elementHead.html(c).show():this.elementHead.hide(),b?this.elementBody.html(b).show():this.elementBody.hide(),this.fireEvent("load",b),d.follow){var e=this.onFollow.bind(this);this.node.off("mousemove",e).on("mousemove",e),this.fireEvent("show")}else this.element.positionTo(d.position,this.node,{left:d.xOffset,top:d.yOffset}),setTimeout(function(){this.element.reveal(),this.fireEvent("show")}.bind(this),d.delay||0)},show:function(b,c,d){var e;b?(this.node=b=a(b),this.runtime=e=this.inheritOptions(this.options,b),c=c||this.readValue(b,e.getContent)):this.runtime=e=this.options,c&&(e.ajax?this.cache[c]?this.position(this.cache[c],d):(e.showLoading&&this.position(Toolkit.messages.loading),this.requestData(c)):(c.match(/^#[a-z0-9_\-\.:]+$/i)&&(c=a(c).html()),this.position(c,d)))},onFollow:function(a){a.preventDefault();var b=this.runtime;this.element.positionTo(b.position,a,{left:b.xOffset,top:b.yOffset},!0).reveal()},onShow:function(b){var c=a(b.target),d=this.node&&this.node.is(c);if(this.element.is(":shown")){if(Toolkit.isTouch?d&&"a"===this.node.prop("tagName").toLowerCase()||b.preventDefault():b.preventDefault(),"click"===this.options.mode&&this.hide(),d)return}else b.preventDefault();this.show(c)}},{mode:"hover",animation:"fade",ajax:!1,follow:!1,position:"top-center",showLoading:!0,showTitle:!0,getTitle:"title",getContent:"data-tooltip",mouseThrottle:50,xOffset:0,yOffset:0,delay:0,titleElement:".tooltip-head",contentElement:".tooltip-body",template:'<div class="tooltip"><div class="tooltip-inner"><div class="tooltip-head"></div><div class="tooltip-body"></div></div><div class="tooltip-arrow"></div></div>'}),Toolkit.createComponent("tooltip",function(a){return new Toolkit.Tooltip(this,a)},!0)}(jQuery);