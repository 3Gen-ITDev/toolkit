/*!
 * Titon Toolkit v1.1.0-rc.2
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Tooltip=Toolkit.Component.extend(function(b,c){var d;this.component="Tooltip",this.version="1.1.0",this.options=c=this.setOptions(c),this.nodes=b=a(b),this.node=null,this.element=d=this.createElement(),this.elementHead=d.find(c.titleElement),this.elementBody=d.find(c.contentElement),this.cache={},d.addClass(a.hyphenate(c.position)),a(c.context||document).on("click"===c.mode?"click":"mouseover",b.selector,this.__show.bind(this)),"click"===c.mode&&d.clickout(this.hide.bind(this)),this.fireEvent("init")},{hide:function(){this.element.conceal(),this.fireEvent("hide")},position:function(a,b){var c=this.options;if(a!==!0)if(b=b||this.readValue(this.node,c.getTitle),b&&c.showTitle?this.elementHead.html(b).show():this.elementHead.hide(),a?this.elementBody.html(a).show():this.elementBody.hide(),this.fireEvent("load",a),c.follow){var d=this.__follow.bind(this);this.node.off("mousemove",d).on("mousemove",d),this.fireEvent("show")}else this.element.positionTo(c.position,this.node,{left:c.xOffset,top:c.yOffset}),setTimeout(function(){this.element.reveal(),this.fireEvent("show")}.bind(this),c.delay||0)},show:function(b,c,d){var e=this.options;b&&(b=a(b),"hover"===e.mode&&b.off("mouseleave",this.hide.bind(this)).on("mouseleave",this.hide.bind(this)),c=c||this.readValue(b,e.getContent)),c&&(this.node=b,e.ajax?this.cache[c]?this.position(this.cache[c],d):(e.showLoading&&this.position(e.loadingMessage),this.requestData(c)):(c.match(/^#[a-z0-9_\-\.:]+$/i)&&(c=a(c).html()),this.position(c,d)))},__follow:function(a){a.preventDefault();var b=this.options;this.element.positionTo(b.position,a,{left:b.xOffset,top:b.yOffset},!0).reveal()},__show:function(b){var c=a(b.target),d=this.node&&c[0]===this.node[0];if(this.element.is(":shown")){if(Toolkit.isTouch?d&&"a"===this.node.prop("tagName").toLowerCase()||b.preventDefault():b.preventDefault(),"click"===this.options.mode&&this.hide(),d)return}else b.preventDefault();this.show(c)}},{mode:"hover",ajax:!1,follow:!1,position:"topCenter",loadingMessage:Toolkit.messages.loading,showLoading:!0,showTitle:!0,getTitle:"title",getContent:"data-tooltip",mouseThrottle:50,xOffset:0,yOffset:0,delay:0,titleElement:".tooltip-head",contentElement:".tooltip-body",template:'<div class="tooltip"><div class="tooltip-inner"><div class="tooltip-head"></div><div class="tooltip-body"></div></div><div class="tooltip-arrow"></div></div>'}),Toolkit.createComponent("tooltip",function(a){return new Toolkit.Tooltip(this,a)},!0)}(jQuery);