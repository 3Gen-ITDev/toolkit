/*!
 * Titon Toolkit v1.0.2
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Tooltip=Toolkit.Component.create(function(b,c){this.options=this.setOptions(Toolkit.Tooltip.options,c),this.nodes=a(b),this.node=null,this.element=this.createElement(this.options),this.elementHead=null,this.elementBody=null,this.cache={},this.enabled=!0,this.initialize=function(){var b=this.options;this.elementHead=this.element.find(b.titleElement),this.elementBody=this.element.find(b.contentElement),this.element.addClass(b.position.hyphenate()),a(b.context||document).on("click"===b.mode?"click":"mouseover",this.nodes.selector,this.__show.bind(this)),this.fireEvent("init")},this.hide=function(){return this.element.conceal(),this.fireEvent("hide"),this},this.position=function(a,b){var c=this.options;if(a===!0)return this;if(b&&c.showTitle?this.elementHead.html(b).show():this.elementHead.hide(),a?this.elementBody.html(a).show():this.elementBody.hide(),this.fireEvent("load",a),c.follow){var d=this.__follow.bind(this);this.node.off("mousemove",d).on("mousemove",d),this.fireEvent("show")}else this.element.positionTo(c.position,this.node,{left:c.xOffset,top:c.yOffset}),window.setTimeout(function(){this.element.reveal(),this.fireEvent("show")}.bind(this),c.delay||0);return this},this.show=function(b,c,d){return b&&(b=a(b),"hover"===this.options.mode&&b.off("mouseleave",this.hide.bind(this)).on("mouseleave",this.hide.bind(this)),d=d||this.readValue(b,this.options.getTitle),c=c||this.readValue(b,this.options.getContent)),c?(this.node=b,this.options.ajax?this.cache[c]?this.position(this.cache[c],d):this.requestData("tooltip",c):("#"===c.substr(0,1)&&(c=a(c).html()),this.position(c,d)),this):this},this.__follow=function(a){a.stopPropagation();var b=this.options;this.element.positionTo(b.position,a,{left:b.xOffset,top:b.yOffset},!0).reveal()},this.__show=function(b){b.preventDefault();var c=a(b.target);this.element.is(":shown")&&("click"===this.options.mode&&this.hide(),this.node&&c.get(0)===this.node.get(0))||this.show(c)},this.initialize()}),Toolkit.Tooltip.options={mode:"hover",ajax:!1,follow:!1,position:"topRight",showLoading:!0,showTitle:!0,getTitle:"title",getContent:"data-tooltip",mouseThrottle:50,xOffset:0,yOffset:0,delay:0,titleElement:".tooltip-head",contentElement:".tooltip-body",template:'<div class="tooltip"><div class="tooltip-inner"><div class="tooltip-head"></div><div class="tooltip-body"></div></div><div class="tooltip-arrow"></div></div>'},a.fn.tooltip=function(b){var c=new Toolkit.Tooltip(this,b);return this.each(function(){a(this).addData("toolkit.tooltip",c)})}}(jQuery);