/*!
 * Titon Toolkit v1.1.0-alpha
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";a.Toolkit={version:"1.1.0-alpha",build:"hq5l8x7q",options:{vendor:"",isPrefix:"is-",hasPrefix:"has-"},messages:{loading:"Loading...",error:"An error has occurred!"},ie8:!(!a.attachEvent||a.addEventListener),ie9:!(!a.addEventListener||!navigator.userAgent.match(/MSIE/i)),isTouch:!!("ontouchstart"in a)},$.fn.toolkit=function(a){var b,c="toolkit."+a,d=[];return this.each(function(){(b=$(this).data(c))&&d.push(b)}),1===this.length&&d[0]?d[0]:d},$.fn.reveal=function(){return this.removeClass("hide").addClass("show")},$.fn.conceal=function(){return this.removeClass("show").addClass("hide")},$.fn.i=$.fn.item=function(a){var b=this.get(a);return b?$(b):null},$.fn.addData=function(a,b){var c=this.data(a);return c?c:("function"==typeof b&&(b=b.call(this)),this.data(a,b),b)},jQuery.event.special.clickout=function(){function a(a){var c=!0;b.each(function(){if(c){var b=$(this);c=!b.is(a.target)&&0===b.has(a.target).length}}),c&&b.triggerHandler("clickout",[a.target])}var b=$([]),c=$(document);return{setup:function(){b=b.add(this),1===b.length&&c.on("click",a)},teardown:function(){b=b.not(this),0===b.length&&c.off("click",a)},add:function(a){var b=a.handler;a.handler=function(a,c){a.target=c,b.apply(this,arguments)}}}}(),$.fn.clickout=function(a,b){return arguments.length>0?this.on("clickout",null,a,b):this.trigger("clickout")},$.fn.positionTo=function(a,b,c,d){a=a.hyphenate().split("-");var e={y:a[0],x:a[1]},f=c||{left:0,top:0},g=0,h=0,i=this.outerHeight(!0),j=this.outerWidth(!0);if(b.preventDefault)f.left+=b.pageX,f.top+=b.pageY;else{var k=b.offset();f.left+=k.left,f.top+=k.top,g=b.outerHeight(),h=b.outerWidth()}return"top"===e.y?f.top-=i:"bottom"===e.y?f.top+=g:"center"===e.y&&(f.top-=Math.round(i/2-g/2)),"left"===e.x?f.left-=j:"right"===e.x?f.left+=h:"center"===e.x&&(f.left-=Math.round(j/2-h/2)),d&&("center"===e.y&&("left"===e.x?f.left-=15:"right"===e.x&&(f.left+=15)),"center"===e.x&&("top"===e.y?f.top-=10:"bottom"===e.y&&(f.top+=20))),this.css(f)},$.debounce=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e),c=null},b||150)}},$.throttle=function(a,b,c){return a.$throttled||(a.$throttled=setTimeout(function(){a.apply(this,c||[]),a.$throttled=!1},b||250)),a},$.expr[":"].shown=function(a){return"hidden"!==$(a).css("visibility")},Array.prototype.chunk||(Array.prototype.chunk=function(a){for(var b=this,c=[],d=0,e=b.length;e>d;)c.push(b.slice(d,d+=a));return c}),String.prototype.hyphenate||(String.prototype.hyphenate=function(){return this.replace(/[A-Z]/g,function(a){return"-"+a.charAt(0).toLowerCase()})}),Function.prototype.create||(Function.prototype.create=function(a){return a.prototype=new this,a.prototype.constructor=a,a}),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=arguments.length>1?[].slice.call(arguments,1):null,d=function(){},e=function(){var f=a,g=arguments.length;this instanceof e&&(d.prototype=b.prototype,f=new d);var h=c||g?b.apply(f,c&&g?c.concat([].slice.call(arguments)):c||arguments):b.call(f);return f===a?h:f};return e})}(window);!function(a){"use strict";Toolkit.Component=function(){this.createElement=function(b){var c;if(b.templateFrom&&(c=a(b.templateFrom)),c&&c.length||!b.template||(c=a(b.template),c.length&&c.conceal().appendTo("body")),!c)throw new Error("Failed to create template element");return this.setElement(c,b)},this.disable=function(){return this.enabled=!1,this},this.enable=function(){return this.enabled=!0,this},this.fireEvent=function(b,c){return c&&!a.isArray(c)&&(c=[c]),"on"!==b.substr(0,2)&&(b="on"+b.charAt(0).toUpperCase()+b.slice(1)),this.options[b]&&this.options[b].apply(this,c||[]),this},this.process=function(a){if(this.hide(),a.callback){for(var b=a.callback.split("."),c=window,d=0;d<b.length;d++)c=c[b[d]];c.call(this,a)}return this.fireEvent("process",a),this},this.readValue=function(b,c){return c?(b=a(b),"function"===a.type(c)?c.call(this,b):b.attr(c)):null},this.requestData=function(b,c,d,e,f){var g=c.url||c,h=a.extend({},{url:g,type:"GET",context:this,beforeSend:d||function(){this.cache[g]=!0,this.options.showLoading&&(this.element.addClass(Toolkit.options.isPrefix+"loading"),this.position(this._loadingTemplate(b)))}},c);"object"===a.type(this.options.ajax)&&(h=a.extend({},this.options.ajax,h));var i="GET"===h.type.toUpperCase();return a.ajax(h).done(e||function(a,b,c){this.options.showLoading&&this.element.removeClass(Toolkit.options.isPrefix+"loading"),c.getResponseHeader("Content-Type").indexOf("text/html")>=0?(i&&(this.cache[g]=a),this.position(a)):(delete this.cache[g],this.process(a))}).fail(f||function(){delete this.cache[g],this.element.removeClass(Toolkit.options.isPrefix+"loading").addClass(Toolkit.options.hasPrefix+"failed"),this.position(this._errorTemplate(b))}),this},this.setElement=function(b,c){return b=a(b),c.template=!1,c.className&&b.addClass(c.className),c.animation&&b.addClass(c.animation),b},this.setOptions=function(b,c){var d=a.extend({},b||{},c||{});return Toolkit.isTouch&&"hover"===d.mode&&(d.mode="click"),d},this._errorTemplate=function(b){return a("<div/>").addClass(Toolkit.options.vendor+b+"-error").text(Toolkit.messages.error)},this._loadingTemplate=function(b){return a("<div/>").addClass(Toolkit.options.vendor+b+"-loading").text(Toolkit.messages.loading)}}}(jQuery);