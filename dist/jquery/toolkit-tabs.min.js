/*!
 * Titon Toolkit v1.1.0-rc.1
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Tabs=Toolkit.Component.create(function(b,c){this.component="Tabs",this.version="0.0.0",this.options=c=this.setOptions(c),this.element=b=this.setElement(b),c.cookie||(c.cookie=b.attr("id")),this.nav=b.find(c.navElement),this.sections=b.find(c.sectionsElement).conceal(),this.tabs=this.nav.find("ul > li > a").each(function(b){a(this).data("index",b).removeClass(Toolkit.options.isPrefix+"active")}),this.previousIndex=0,this.currentIndex=0,this.cache={},this.tabs.on("click"===c.mode?"click":"mouseover",this.__show.bind(this)),"hover"===c.mode&&c.preventDefault&&this.tabs.on("click",function(a){a.preventDefault()}),this.fireEvent("init");var d=c.defaultIndex;if(c.persistState){var e="toolkit.tabs."+c.cookie,f=document.cookie.match("(?:^|;)\\s*"+e.replace(/[\-\.\+\*]/g,"\\$&")+"=([^;]*)");f&&f.length&&(d=decodeURIComponent(f[1]))}else if(c.loadFragment&&location.hash){var g=this.tabs.filter(function(){return a(this).attr("href")===location.hash});g.length&&(d=g.item(0).data("index"))}this.tabs[d]||(d=0),this.jump(d)},{hide:function(){return this.sections.conceal(),this.fireEvent("hide",this.node),this},jump:function(a){return this.tabs[a]&&this.show(this.tabs[a]),this},show:function(b){b=a(b);var c=b.data("index"),d=this.sections.item(c),e=this.readValue(b,this.options.getUrl);if(this.options.ajax&&e&&"#"!==e.substr(0,1)&&!this.cache[e]&&this.requestData(e,function(){d.html(this._loadingTemplate()).addClass(Toolkit.options.isPrefix+"loading")},function(a){this.cache[e]=!0,d.html(a).removeClass(Toolkit.options.isPrefix+"loading"),this.fireEvent("load",a)},function(){d.html(this._errorTemplate()).removeClass(Toolkit.options.isPrefix+"loading").addClass(Toolkit.options.hasPrefix+"failed")}),this.nav.find("ul > li").removeClass(Toolkit.options.isPrefix+"active"),c===this.currentIndex&&this.options.collapsible?d.is(":shown")?d.conceal():(b.parent().addClass(Toolkit.options.isPrefix+"active"),d.reveal()):(this.hide(),b.parent().addClass(Toolkit.options.isPrefix+"active"),d.reveal()),this.options.persistState){var f="toolkit.tabs."+this.options.cookie+"="+encodeURIComponent(c),g=new Date;g.setTime(g.getTime()+24*this.options.cookieDuration*60*60*1e3),f+="; expires="+g.toUTCString(),f+="; path=/",document.cookie=f}return this.previousIndex=this.currentIndex,this.currentIndex=c,this.fireEvent("show",b),this.node=b,this},__show:function(b){(this.options.preventDefault||this.options.ajax&&"#"!==a(b.target).attr("href").substr(0,1))&&b.preventDefault(),this.enabled&&this.show(b.target)}},{mode:"click",ajax:!0,collapsible:!1,defaultIndex:0,persistState:!1,preventDefault:!0,loadFragment:!0,cookie:null,cookieDuration:30,getUrl:"href",navElement:".tabs-nav",sectionsElement:".tabs-section"}),Toolkit.createComponent("tabs",function(a){return new Toolkit.Tabs(this,a)})}(jQuery);