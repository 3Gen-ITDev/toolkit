/*!
 * Titon Toolkit v1.1.0
 * Copyright 2010-2014, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Tabs=Toolkit.Component.extend(function(b,c){var d,e;this.component="Tabs",this.version="1.0.0",this.element=b=a(b),this.options=c=this.setOptions(c,b),this.nav=b.find(c.navElement),this.tabs=e=this.nav.find("ul > li > a"),this.sections=b.find(c.sectionElement).conceal(),this.index=0,this.cache={},this.events=d={},c.cookie||(c.cookie=b.attr("id")),e.each(function(b){a(this).data("index",b).removeClass(Toolkit.options.isPrefix+"active")}),d[c.mode+" tabs"]="onShow","click"!==c.mode&&c.preventDefault&&(d["click tabs"]=function(a){a.preventDefault()}),this.enable(),this.fireEvent("init");var f=c.defaultIndex;c.persistState&&c.cookie&&(f=a.cookie("toolkit.tabs."+c.cookie)),!f&&c.loadFragment&&location.hash&&(f=e.filter(function(){return a(this).attr("href")===location.hash}).item(0).data("index")),f&&e[f]||(f=c.defaultIndex),this.jump(f)},{hide:function(){this.sections.conceal(),this.fireEvent("hide",this.node)},jump:function(a){this.show(this.tabs[Toolkit.bound(a,this.tabs.length)])},show:function(b){b=a(b);var c=b.data("index"),d=this.sections.item(c),e=this.options,f=this.readValue(b,e.getUrl),g=Toolkit.options.isPrefix;e.ajax&&f&&"#"!==f.substr(0,1)&&!this.cache[f]&&this.requestData(f,function(){d.html(this._loadingTemplate()).addClass(g+"loading")},function(a){this.cache[f]=!0,d.html(a).removeClass(g+"loading"),this.fireEvent("load",a)},function(){d.html(this._errorTemplate()).removeClass(g+"loading").addClass(Toolkit.options.hasPrefix+"failed")}),this.nav.find("ul > li").removeClass(g+"active"),c===this.index&&e.collapsible?d.is(":shown")?d.conceal():(b.parent().addClass(g+"active"),d.reveal()):(this.hide(),b.parent().addClass(g+"active"),d.reveal()),e.persistState&&a.cookie("toolkit.tabs."+e.cookie,c,{expires:e.cookieDuration}),this.index=c,this.fireEvent("show",b),this.node=b},onShow:function(a){(this.options.preventDefault||this.options.ajax&&"#"!==a.target.href.substr(0,1))&&a.preventDefault(),this.show(a.target)}},{mode:"click",ajax:!0,collapsible:!1,defaultIndex:0,persistState:!1,preventDefault:!0,loadFragment:!0,cookie:null,cookieDuration:30,getUrl:"href",navElement:".tabs-nav",sectionElement:".tabs-section"}),Toolkit.createComponent("tabs",function(a){return new Toolkit.Tabs(this,a)})}(jQuery);