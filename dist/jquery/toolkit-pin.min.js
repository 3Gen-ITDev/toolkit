/*!
 * Titon Toolkit v1.1.0
 * Copyright 2010-2014, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Pin=Toolkit.Component.extend(function(b,c){this.component="Pin",this.version="1.0.0",this.element=b=a(b),this.options=c=this.setOptions(c,b),this.elementHeight=null,this.elementTop=parseInt(b.css("top"),10),this.parentHeight=null,this.parentTop=null,this.viewport=null,this.active=!0,b.addClass(Toolkit.options.vendor+"pin").addClass(c.animation);var d=c.throttle;this.events={"scroll window":d?a.throttle(this.onScroll.bind(this),d):"onScroll","resize window":d?a.throttle(this.onResize.bind(this),d):"onResize","ready document":"calculate"},this.enable(),this.fireEvent("init")},{calculate:function(){var b=a(window),c=this.options.context?this.element.parents(this.options.context):this.element.parent();this.viewport={width:b.width(),height:b.height()},this.elementHeight=this.element.outerHeight(),this.parentHeight=c.outerHeight(),this.parentTop=c.offset().top,this.active=this.parentHeight>this.elementHeight},onResize:function(){this.calculate(),this.fireEvent("resize")},onScroll:function(){if(this.options.calculate&&this.calculate(),this.active&&!this.element.is(":hidden")){var b=this.options,c=b.fixed,d=this.elementHeight,e=this.elementTop,f=this.parentHeight,g=this.parentTop,h=a(window).scrollTop(),i={},j=b.xOffset,k=0,l=Toolkit.options.isPrefix;if(g>h)return void this.element.removeAttr("style").removeClass(l+"pinned");var m=h+d,n=f+g;c?m>=n?(k="auto",i.position="absolute",i.bottom=0):(i.position="fixed",i.bottom="auto"):(i.position="absolute",k+=m>=n?f-d:h-g+b.yOffset,e&&e>k&&(k=e)),i[b.location]=j,i.top=k,this.element.css(i).addClass(l+"pinned"),this.fireEvent("scroll")}}},{location:"right",xOffset:0,yOffset:0,throttle:50,fixed:!1,calculate:!1}),Toolkit.createComponent("pin",function(a){return new Toolkit.Pin(this,a)})}(jQuery);