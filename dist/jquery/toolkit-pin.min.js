/*!
 * Titon Toolkit v1.0.3
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Pin=Toolkit.Component.create(function(b,c){this.options=this.setOptions(Toolkit.Pin.options,c),this.element=this.setElement(b,this.options),this.viewport=null,this.elementHeight=null,this.elementTop=null,this.parentHeight=null,this.parentTop=null,this.enabled=!0,this.initialize=function(){this.element.addClass(Toolkit.options.vendor+"pin"),this.elementTop=parseInt(this.element.css("top"),10),a(window).on("scroll",a.throttle(this.__scroll.bind(this),this.options.throttle)),a(window).on("resize",a.throttle(this.__resize.bind(this),this.options.throttle)),a(document).ready(this.__resize.bind(this)),this.fireEvent("init")},this.calculate=function(){var b=a(window),c=this.element.parents(this.options.context);return this.viewport={width:b.width(),height:b.height()},this.elementHeight=this.element.outerHeight(),this.parentHeight=c.outerHeight(),this.parentTop=c.offset().top,this},this.__resize=function(){this.calculate(),this.parentHeight>=this.elementHeight?this.enable():this.disable(),this.fireEvent("resize")},this.__scroll=function(){if(this.options.calculate&&this.calculate(),this.enabled&&!this.element.is(":hidden")){var b=this.options,c=b.fixed,d=this.elementHeight,e=this.elementTop,f=this.parentHeight,g=this.parentTop,h=a(window).scrollTop(),i={},j=b.xOffset,k=0;if(g>h)return this.element.removeAttr("style").addClass(Toolkit.options.isPrefix+"pinned"),void 0;var l=h+d,m=f+g;c?l>=m?(k="auto",i.position="absolute",i.bottom=0):(i.position="fixed",i.bottom="auto"):(i.position="absolute",k+=l>=m?f-d:h-g+b.yOffset,e&&e>k&&(k=e)),i[b.location]=j,i.top=k,this.element.css(i).addClass(Toolkit.options.isPrefix+"pinned"),this.fireEvent("scroll")}},this.element.length&&this.initialize()}),Toolkit.Pin.options={animation:"",location:"right",xOffset:0,yOffset:0,throttle:50,fixed:!1,calculate:!1,context:null},a.fn.pin=function(b){return this.each(function(){a(this).addData("toolkit.pin",function(){return new Toolkit.Pin(this,b)})})}}(jQuery);