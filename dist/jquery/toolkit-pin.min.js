/*!
 * Titon Toolkit v1.1.0-rc.1
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Pin=Toolkit.Component.create(function(b,c){this.component="Pin",this.version="0.0.0",this.options=c=this.setOptions(c),this.element=b=this.setElement(b),this.viewport=null,this.elementHeight=null,this.elementTop=parseInt(b.css("top"),10),this.parentHeight=null,this.parentTop=null,b.addClass(Toolkit.options.vendor+"pin"),a(window).on("scroll",a.throttle(this.__scroll.bind(this),c.throttle)).on("resize",a.throttle(this.__resize.bind(this),c.throttle)),a(document).ready(this.__resize.bind(this)),this.fireEvent("init")},{calculate:function(){var b=a(window),c=this.element.parents(this.options.context);return this.viewport={width:b.width(),height:b.height()},this.elementHeight=this.element.outerHeight(),this.parentHeight=c.outerHeight(),this.parentTop=c.offset().top,this},__resize:function(){this.calculate(),this.parentHeight>=this.elementHeight?this.enable():this.disable(),this.fireEvent("resize")},__scroll:function(){if(this.options.calculate&&this.calculate(),this.enabled&&!this.element.is(":hidden")){var b=this.options,c=b.fixed,d=this.elementHeight,e=this.elementTop,f=this.parentHeight,g=this.parentTop,h=a(window).scrollTop(),i={},j=b.xOffset,k=0;if(g>h)return void this.element.removeAttr("style").addClass(Toolkit.options.isPrefix+"pinned");var l=h+d,m=f+g;c?l>=m?(k="auto",i.position="absolute",i.bottom=0):(i.position="fixed",i.bottom="auto"):(i.position="absolute",k+=l>=m?f-d:h-g+b.yOffset,e&&e>k&&(k=e)),i[b.location]=j,i.top=k,this.element.css(i).addClass(Toolkit.options.isPrefix+"pinned"),this.fireEvent("scroll")}}},{animation:"",location:"right",xOffset:0,yOffset:0,throttle:50,fixed:!1,calculate:!1,context:null}),Toolkit.createComponent("pin",function(a){return new Toolkit.Pin(this,a)})}(jQuery);