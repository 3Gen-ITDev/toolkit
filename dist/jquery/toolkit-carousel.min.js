/*!
 * Titon Toolkit v1.1.0-rc.1
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Carousel=Toolkit.Component.create(function(a,b){this.component="Carousel",this.version="0.0.0",this.options=this.setOptions(Toolkit.Carousel.options,b),this.element=this.setElement(a,this.options),this.stopped=!1,this.itemsWrapper=null,this.itemsList=null,this.items=[],this.tabsWrapper=null,this.tabs=[],this.prevButton=null,this.nextButton=null,this.previousIndex=0,this.currentIndex=0,this.timer=null,this.initialize()}),Toolkit.Carousel.options={animation:"slide",duration:5e3,autoCycle:!0,stopOnHover:!0,itemsElement:".carousel-items",itemElement:"li",tabsElement:".carousel-tabs",tabElement:"a",nextElement:".carousel-next",prevElement:".carousel-prev"};var b=Toolkit.Carousel.prototype;b.initialize=function(){var b=this.options;if(this.itemsWrapper=this.element.find(b.itemsElement),this.itemsList=this.itemsWrapper.children("ul, ol"),this.items=this.itemsWrapper.find(b.itemElement),this.tabsWrapper=this.element.find(b.tabsElement),this.tabs=this.tabsWrapper.find(b.tabElement),this.nextButton=this.element.find(b.nextElement),this.prevButton=this.element.find(b.prevElement),this.items.length<=1)return this.tabsWrapper.hide(),this.nextButton.hide(),void this.prevButton.hide();switch(b.animation){case"fade":this.items.item(0).reveal();break;case"slide":this.itemsList.css("width",100*this.items.length+"%"),this.items.css("width",100/this.items.length+"%")}this.tabs.each(function(b){a(this).data("index",b)}),a(window).on("keydown",function(b){switch(a.inArray(b.keyCode,[37,38,39,40])>=0&&b.preventDefault(),b.keyCode){case 37:this.prev();break;case 38:this.jump(0);break;case 39:this.next();break;case 40:this.jump(-1)}}.bind(this)),b.stopOnHover&&this.element.on("mouseenter",this.stop.bind(this)).on("mouseleave",this.start.bind(this)),this.element.on("swipeleft",this.next.bind(this)).on("swiperight",this.prev.bind(this)),this.tabs.on("click",this.__jump.bind(this)),this.nextButton.on("click",this.next.bind(this)),this.prevButton.on("click",this.prev.bind(this)),this.fireEvent("init"),this.start().reset()},b.jump=function(a){switch(a>=this.items.length?a=0:0>a&&(a=this.items.length-1),this.previousIndex=this.currentIndex,this.currentIndex=a,this.tabs.length&&this.tabs.removeClass(Toolkit.options.isPrefix+"active").item(a).addClass(Toolkit.options.isPrefix+"active"),this.options.animation){case"fade":this.items.removeClass("show").item(a).reveal();break;case"slide-up":this.itemsList.css("top",-(100*a)+"%");break;default:this.itemsList.css("left",-(100*a)+"%")}return this.reset(),this.fireEvent("jump",a),this},b.next=function(){return this.jump(this.currentIndex+1),this},b.prev=function(){return this.jump(this.currentIndex-1),this},b.reset=function(){return this.options.autoCycle&&(clearInterval(this.timer),this.timer=setInterval(this.__cycle.bind(this),this.options.duration)),this},b.start=function(){return this.element.removeClass(Toolkit.options.isPrefix+"stopped"),this.stopped=!1,this.fireEvent("start"),this},b.stop=function(){return this.element.addClass(Toolkit.options.isPrefix+"stopped"),this.stopped=!0,this.fireEvent("stop"),this},b.__cycle=function(){this.enabled&&(this.stopped||(this.fireEvent("cycle"),this.next()))},b.__jump=function(b){b.preventDefault(),this.enabled&&this.jump(a(b.target).data("index")||0)},Toolkit.createComponent("carousel",function(a){return new Toolkit.Carousel(this,a)})}(jQuery);