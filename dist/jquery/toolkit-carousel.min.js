/*!
 * Titon Toolkit v1.0.0-rc.3
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Carousel=Toolkit.Component.create(function(b,c){this.options=this.setOptions(Toolkit.Carousel.options,c),this.element=this.setElement(b,this.options),this.stopped=!1,this.itemsWrapper=null,this.itemsList=null,this.items=[],this.tabsWrapper=null,this.tabs=[],this.prevButton=null,this.nextButton=null,this.previousIndex=0,this.currentIndex=0,this.timer=null,this.enabled=!0,this.initialize=function(){var b=this.options;if(this.itemsWrapper=this.element.find(b.itemsElement),this.itemsList=this.itemsWrapper.children("ul, ol"),this.items=this.itemsWrapper.find(b.itemElement),this.tabsWrapper=this.element.find(b.tabsElement),this.tabs=this.tabsWrapper.find(b.tabElement),this.nextButton=this.element.find(b.nextElement),this.prevButton=this.element.find(b.prevElement),this.items.length<=1)return this.tabsWrapper.hide(),this.nextButton.hide(),this.prevButton.hide(),void 0;switch(b.animation){case"fade":a(this.items[0]).reveal();break;case"slide":this.itemsList.css("width",100*this.items.length+"%"),this.items.css("width",100/this.items.length+"%")}this.tabs.each(function(b){a(this).data("index",b)}),a(window).on("keydown",function(b){switch(a.inArray(b.keyCode,[37,38,39,40])>=0&&b.preventDefault(),b.keyCode){case 37:this.prev();break;case 38:this.jump(0);break;case 39:this.next();break;case 40:this.jump(-1)}}.bind(this)),b.stopOnHover&&this.element.on("mouseenter",this.stop.bind(this)).on("mouseleave",this.start.bind(this)),this.element.on("swipeleft",this.next.bind(this)).on("swiperight",this.prev.bind(this)),this.tabs.on("click",this.__jump.bind(this)),this.nextButton.on("click",this.next.bind(this)),this.prevButton.on("click",this.prev.bind(this)),this.start().reset(),this.fireEvent("init")},this.jump=function(b){switch(b>=this.items.length?b=0:0>b&&(b=this.items.length-1),this.previousIndex=this.currentIndex,this.currentIndex=b,this.tabs.length&&(this.tabs.removeClass("is-active"),a(this.tabs[b]).addClass("is-active")),this.options.animation){case"fade":this.items.removeClass("show"),a(this.items[b]).reveal();break;case"slide-up":this.itemsList.css("top",-(100*b)+"%");break;default:this.itemsList.css("left",-(100*b)+"%")}return this.reset(),this.fireEvent("jump",b),this},this.next=function(){return this.jump(this.currentIndex+1),this},this.prev=function(){return this.jump(this.currentIndex-1),this},this.reset=function(){return this.options.autoCycle&&(clearInterval(this.timer),this.timer=setInterval(this.__cycle.bind(this),this.options.duration)),this},this.start=function(){return this.element.removeClass("is-stopped"),this.stopped=!1,this.fireEvent("start"),this},this.stop=function(){return this.element.addClass("is-stopped"),this.stopped=!0,this.fireEvent("stop"),this},this.__cycle=function(){this.enabled&&(this.stopped||(this.fireEvent("cycle"),this.next()))},this.__jump=function(b){b.preventDefault(),b.stopPropagation(),this.enabled&&this.jump(a(b.target).data("index")||0)},this.element.length&&this.initialize()}),Toolkit.Carousel.options={animation:"slide",duration:5e3,autoCycle:!0,stopOnHover:!0,itemsElement:".carousel-items",itemElement:"li",tabsElement:".carousel-tabs",tabElement:"a",nextElement:".carousel-next",prevElement:".carousel-prev"},a.fn.carousel=function(a){return this.each(function(){this.$carousel||(this.$carousel=new Toolkit.Carousel(this,a))})}}(jQuery);