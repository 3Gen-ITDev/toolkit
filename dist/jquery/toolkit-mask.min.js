/*!
 * Titon Toolkit v1.1.0-rc.1
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Mask=Toolkit.Component.create(function(a,b){this.component="Mask",this.version="0.0.0",this.options=this.setOptions(Toolkit.Mask.options,b),this.element=this.setElement(a,this.options),this.mask=null,this.message=null,this.initialize()}),Toolkit.Mask.options={revealOnClick:!1,messageContent:"",messageElement:".mask-message"};var b=Toolkit.Mask.prototype;b.initialize=function(){var b=this.element,c=Toolkit.options.vendor,d=c+"mask";b.is("body")||(b.addClass(c+"maskable"),"static"===b.css("position")&&b.css("position","relative"));var e=b.find("> ."+d);e.length||(e=a("<div/>").addClass(d)),this.setMask(e),this.fireEvent("init")},b.hide=function(){return this.mask.conceal(),this.element.removeClass(Toolkit.options.isPrefix+"masked"),this.fireEvent("hide"),this},b.setMask=function(b){var c=this.options;return b.addClass("hide").appendTo(this.element),this.element.is("body")&&b.css("position","fixed"),c.revealOnClick&&b.click(this.hide.bind(this)),this.mask=b,this.message=b.find("> "+c.messageElement),this.message.length||(this.message=a("<div/>").addClass(c.messageElement.substr(1)).appendTo(b),c.messageContent&&this.message.html(c.messageContent)),this},b.show=function(a){return this.enabled?(this.node=a,this.mask.reveal(),this.element.addClass(Toolkit.options.isPrefix+"masked"),this.fireEvent("show"),this):this},b.toggle=function(){return this.mask.is(":shown")?this.hide():this.show()},a.fn.mask=function(b){return this.each(function(){a(this).addData("toolkit.mask",function(){return new Toolkit.Mask(this,b)})})}}(jQuery);