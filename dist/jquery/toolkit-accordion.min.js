/*!
 * Titon Toolkit v1.0.1
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.Accordion=Toolkit.Component.create(function(b,c){this.options=this.setOptions(Toolkit.Accordion.options,c),this.element=this.setElement(b,this.options),this.headers=[],this.sections=[],this.previousIndex=0,this.currentIndex=0,this.node=null,this.enabled=!0,this.initialize=function(){var b=this.options,c=this.element.find(b.contentElement),d=this.element.find(b.headerElement),e=d.item(0);this.headers=d,this.sections=c,d[b.defaultIndex]&&(e=d[b.defaultIndex]),this.element.children("li").removeClass(Toolkit.options.isPrefix+"active"),d.each(function(b){a(this).data("index",b)}),c.each(function(){var b=a(this);b.data("height",b.height()).conceal()}),this.show(e),d.on("click"===this.options.mode?"click":"mouseover",this.__show.bind(this)),this.fireEvent("init")},this.jump=function(a){return a>=this.headers.length?a=0:0>a&&(a=this.headers.length-1),this.fireEvent("jump",a),this.show(this.headers[a])},this.show=function(b){b=a(b);var c=this.options,d=b.parent(),e=b.next(c.contentElement),f=b.data("index"),g=parseInt(e.data("height"),10),h=this.node&&this.node.is(b);if("click"===c.mode&&(c.multiple||c.collapsible&&h))e.is(":shown")&&this.node?(e.css("max-height",0).conceal(),d.removeClass(Toolkit.options.isPrefix+"active")):(e.css("max-height",g).reveal(),d.addClass(Toolkit.options.isPrefix+"active"));else{if(h)return this;this.sections.css("max-height",0).conceal(),e.css("max-height",g).reveal(),this.element.children("li").removeClass(Toolkit.options.isPrefix+"active"),d.addClass(Toolkit.options.isPrefix+"active")}return this.previousIndex=this.currentIndex,this.currentIndex=f,this.node=b,this.fireEvent("show",e),this},this.__show=function(a){a.preventDefault(),this.show(a.currentTarget)},this.element.length&&this.initialize()}),Toolkit.Accordion.options={mode:"click",defaultIndex:0,multiple:!1,collapsible:!1,headerElement:".accordion-head",contentElement:".accordion-handle"},a.fn.accordion=function(b){return this.each(function(){a(this).addData("toolkit.accordion",function(){return new Toolkit.Accordion(this,b)})})}}(jQuery);