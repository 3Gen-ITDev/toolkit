/*!
 * Titon Toolkit v1.1.0-rc.1
 * Copyright 2010-2013, The Titon Project - http://titon.io
 * BSD-2 - https://github.com/titon/toolkit/blob/master/license.md
 */
!function(a){"use strict";Toolkit.LazyLoad=Toolkit.Component.create(function(b,c){this.component="LazyLoad",this.version="0.0.0",this.options=c=this.setOptions(c),this.element=this.setElement(b,this.options),this.isLoaded=!1,this.loaded=0,a(c.context||window).on({scroll:a.throttle(this.load.bind(this),c.throttle),resize:a.throttle(this.load.bind(this),c.throttle)}),a(function(){this.load(),c.forceLoad&&setTimeout(this.loadAll.bind(this),c.delay)}.bind(this)),this.fireEvent("init")},{inViewport:function(b){var c=a(window),d=this.options.threshold,e=c.scrollTop(),f=c.scrollLeft(),g=a(b).offset();return g.top>=e-d&&g.top<=e+c.height()+d&&g.left>=f-d&&g.left<=f+c.width()+d},load:function(){return this.isLoaded?!1:this.loaded===this.element.length?(this.shutdown(),!1):(this.element.each(function(a,b){b&&this.inViewport(b)&&this.show(b,a)}.bind(this)),this.fireEvent("load"),!0)},loadAll:function(){return this.isLoaded?!1:(this.element.each(function(a,b){this.show(b,a)}.bind(this)),this.fireEvent("loadAll"),this.shutdown(),!0)},show:function(b,c){return b=a(b),b.removeClass(this.element.selector.substr(1)),b.find("img").each(function(){var b=a(this),c=b.data("lazyload");c&&b.attr("src",c)}),this.element.splice(c,1,null),this.loaded++,this.fireEvent("show",b),this},shutdown:function(){return this.isLoaded=!0,a(this.options.context||window).off({scroll:this.load.bind(this),resize:this.load.bind(this)}),this.fireEvent("shutdown"),this}},{forceLoad:!1,delay:1e4,threshold:150,throttle:50,context:null}),Toolkit.createComponent("lazyLoad",function(a){return new Toolkit.LazyLoad(this,a)},!0)}(jQuery);